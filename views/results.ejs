<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NCAE Results</title>
    
    <style>
        /* --- SECTION 1: GLOBAL RESET (Matches Index) --- */
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
            position: relative;
        }

        /* 1. THEME VARIABLES */
        :root {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --text-main: #2c3e50;
            --text-muted: #5f6368;
            --nav-bg-rgb: 255, 255, 255;
            --nav-text: #2c3e50;
            --border-color: #dadce0;
            --accent-blue: #1a73e8;
            --shadow: rgba(0,0,0,0.1);
            --bar-positive: #1a73e8;
            --bar-negative: #e67e22;
            --bar-bg: #e8eaed;
        }

        body.dark-mode {
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-main: #e8eaed;
            --text-muted: #9aa0a6;
            --nav-bg-rgb: 30, 30, 30;
            --nav-text: #e8eaed;
            --border-color: #3c4043;
            --shadow: rgba(0,0,0,0.4);
            --bar-bg: #3c4043;
        }

        /* Jariz Mode (Warm) */
        body.warm-mode::after {
            content: ""; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: rgba(255, 145, 0, 0.12); pointer-events: none; z-index: 9999;
            mix-blend-mode: multiply;
        }

        body { 
            font-family: 'Segoe UI', sans-serif; 
            background-color: var(--bg-color); 
            color: var(--text-main);
            padding-top: 80px;
            transition: background-color 0.3s;
        }

        /* Navbar (Matches Index Glassmorphism) */
        .navbar {
            background-color: rgba(var(--nav-bg-rgb), 0.25); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            height: 70px; width: 100%;
            display: flex; justify-content: center; align-items: center;
            position: fixed; top: 0; z-index: 2000;
            border-bottom: 1px solid var(--border-color);
        }
        .nav-container { width: 95%; max-width: 1200px; display: flex; justify-content: space-between; align-items: center; }
        .nav-logo { font-size: 1.4rem; font-weight: bold; text-decoration: none; color: var(--nav-text); }
        .nav-logo span { color: var(--accent-blue); }

        /* Results Layout (Mobile Optimized) */
        .container { 
            max-width: 800px; 
            width: 95%; 
            margin: 0 auto; 
            padding: 10px 0; 
        }
        
        .result-card {
            background: var(--card-bg);
            padding: 40px 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px var(--shadow);
            text-align: center;
            animation: fadeIn 0.8s ease;
            width: 100%;
            box-sizing: border-box;
        }

        .holland-badge {
            display: inline-block;
            background: var(--accent-blue);
            color: white;
            padding: 10px 30px;
            border-radius: 50px;
            font-size: 2.2rem;
            font-weight: bold;
            letter-spacing: 5px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(26, 115, 232, 0.4);
        }

        /* --- RIASEC DESCRIPTION CARDS --- */
        .profile-breakdown {
            margin: 25px 0;
            text-align: left;
        }
        .desc-pill {
            background: var(--bg-color);
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 12px;
            border-left: 4px solid var(--accent-blue);
        }
        .desc-pill h4 { margin: 0; font-size: 0.9rem; color: var(--accent-blue); text-transform: uppercase; }
        .desc-pill p { margin: 5px 0 0; font-size: 0.85rem; color: var(--text-main); line-height: 1.4; }

        /* --- SCORE DASHBOARD --- */
        .score-dashboard {
            margin: 30px 0;
            padding: 20px 10px;
            background: var(--bg-color);
            border-radius: 15px;
            text-align: left;
        }
        .score-row { display: flex; align-items: center; margin-bottom: 15px; }
        .trait-name { width: 100px; font-weight: bold; font-size: 0.8rem; margin-right: 8px; text-align: right; text-transform: uppercase; }
        
        .bar-wrapper { 
            flex-grow: 1; 
            height: 24px; 
            background: var(--bar-bg); 
            border-radius: 12px; 
            position: relative; 
            display: flex; 
            overflow: hidden;
        }

        .bar-wrapper::after {
            content: ""; position: absolute; left: 50%; top: 0;
            width: 2px; height: 100%; background: var(--border-color); z-index: 5;
        }

        .side-container { width: 50%; height: 100%; display: flex; position: relative; }
        .negative-side { justify-content: flex-end; }
        .positive-side { justify-content: flex-start; }

        .bar-fill { 
            height: 100%; 
            transition: width 1s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            display: flex; align-items: center; padding: 0 8px; 
            font-size: 0.75rem; color: white; font-weight: bold; z-index: 4;
        }

        .positive-bar { background: var(--bar-positive); border-radius: 0 12px 12px 0; }
        .negative-bar { background: var(--bar-negative); border-radius: 12px 0 0 12px; }
        .zero-label { position: absolute; left: 50%; transform: translateX(-50%); font-size: 0.75rem; line-height: 24px; color: var(--text-muted); font-weight: bold; z-index: 6; }

        /* --- RECOMMENDATIONS --- */
        .recommendation-group {
            text-align: left;
            padding: 20px;
            margin-top: 20px;
            border-radius: 12px;
            background: var(--bg-color);
            border-left: 6px solid var(--accent-blue);
            width: 100%;
            box-sizing: border-box;
        }
        .group-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; gap: 10px; }
        .course-title { margin: 0; color: var(--accent-blue); font-size: 1.1rem; line-height: 1.3; }
        
        .provider-dropdown {
            margin-top: 10px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--card-bg);
            overflow: hidden;
        }
        .provider-dropdown summary { padding: 12px; cursor: pointer; font-weight: 600; font-size: 0.85rem; background: rgba(0,0,0,0.02); }
        .provider-list { padding: 0 12px; max-height: 250px; overflow-y: auto; border-top: 1px solid var(--border-color); }
        .provider-item { padding: 12px 0; border-bottom: 1px solid var(--border-color); font-size: 0.85rem; }
        
        .btn {
            display: block;
            margin: 30px auto 0;
            padding: 15px 25px;
            background: var(--accent-blue);
            color: white;
            text-decoration: none;
            border-radius: 10px;
            font-weight: 600;
            text-align: center;
        }

        @media (max-width: 600px) {
            body { padding-top: 70px; }
            .result-card { padding: 30px 15px; border-radius: 0; box-shadow: none; }
            .holland-badge { font-size: 1.8rem; padding: 8px 25px; }
            .trait-name { width: 85px; font-size: 0.7rem; }
            .course-title { font-size: 1rem; }
            .score-dashboard { padding: 15px 5px; }
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<nav class="navbar">
    <div class="nav-container">
        <a href="/" class="nav-logo">Website <span>Name</span></a>
        <div style="font-size: 0.8rem; opacity: 0.7; font-weight: bold;">COMPLETE</div>
    </div>
</nav>

<div class="container">
    <div class="result-card">
        <% if (locals.isDev) { %>
            <div style="color: #e67e22; font-weight: bold; margin-bottom: 15px; border: 1px dashed #e67e22; padding: 5px; display:inline-block; border-radius: 4px; font-size: 0.7rem;">ðŸ›  DEV MODE</div>
        <% } %>
        
        <h1 style="margin:0; font-size: 1.5rem;">Your Holland Code:</h1>
        <div class="holland-badge"><%= hollandCode %></div>

        <div class="profile-breakdown">
            <h3 style="font-size: 0.9rem; text-align: center; color: var(--text-muted); margin-bottom: 15px;">PROFILE BREAKDOWN</h3>
            <% 
                const riasecInfo = {
                    'R': { name: 'Realistic', desc: 'You prefer physical activities that require skill, strength, and coordination. You likely enjoy working with your hands, tools, machinery, or animals. You value practical solutions over abstract theories and prefer a work environment that produces tangible, visible resultsâ€”often outdoors or in technical settings. You tend to be down-to-earth, reliable, and persistent in solving mechanical or physical challenges.' },
                    'I': { name: 'Investigative', desc: 'You are naturally curious and enjoy observing, learning, and evaluating data. You prefer tasks that involve complex problem-solving, research, and independent thinking. You value intellectual challenges and often prefer working in scientific, medical, or academic environments where you can uncover how things work. You tend to be introspective, analytical, and precise, preferring to understand a problem thoroughly before taking action.' },
                    'A': { name: 'Artistic', desc: 'You value self-expression, original ideas, and aesthetics. You prefer unstructured environments that allow for creativity and innovation. Whether it is through language, art, music, or design, you enjoy tasks that allow you to communicate ideas in unique ways and often shy away from highly repetitive or rule-bound work. You tend to be imaginative, sensitive, and independent, viewing the world through a lens of possibilities and emotions.' },
                    'S': { name: 'Social', desc: 'You are dedicated to the well-being of others and enjoy teaching, counseling, or providing service. You have strong communication skills and value cooperation over competition. You thrive in environments where you can lead people toward growth, help them solve personal problems, or contribute to the betterment of society. You tend to be empathetic, friendly, and persuasive, finding your greatest fulfillment in human connection and service.' },
                    'E': { name: 'Enterprising', desc: 'You are energetic, ambitious, and enjoy leading or influencing others. You are comfortable taking risks and making decisions to achieve organizational or financial goals. You value status, power, and competition, and you thrive in fast-paced environments like business, politics, or management where leadership is key. You tend to be self-confident, talkative, and assertive, with a natural ability to motivate others toward a common vision.' },
                    'C': { name: 'Conventional', desc: 'You enjoy working with data, numbers, and structured systems. You value order, accuracy, and efficiency above all else. You are detail-oriented and excel at following through on instructions, managing records, and organizing information. You prefer stable, predictable environments where expectations and rules are clearly defined. You tend to be methodical, efficient, and thorough, ensuring that complex systems run smoothly and without error.' }
                };

                // Split the hollandCode string (e.g., "RIC") into individual letters and loop
                hollandCode.split('').forEach(letter => {
                    const info = riasecInfo[letter];
                    if (info) {
            %>
                <div class="desc-pill">
                    <h4><%= info.name %></h4>
                    <p><%= info.desc %></p>
                </div>
            <% 
                    }
                }); 
            %>
        </div>

        <div class="score-dashboard">
            <h3 style="margin-top: 0; font-size: 0.9rem; text-align: center; margin-bottom: 20px; color: var(--text-muted);">INTEREST INTENSITY PROFILE</h3>
            
            <% 
            const traitNames = {
                R: "Realistic", I: "Investigative", A: "Artistic", 
                S: "Social", E: "Enterprising", C: "Conventional"
            };
            
            Object.entries(scores).forEach(([key, score]) => { 
                let percentage = Math.min(Math.abs((score / 24) * 100), 100);
            %>
                <div class="score-row">
                    <div class="trait-name"><%= traitNames[key] %></div>
                    <div class="bar-wrapper">
                        <div class="side-container negative-side">
                            <% if (score < 0) { %>
                                <div class="bar-fill negative-bar" style="width: <%= percentage %>%;"><%= score %></div>
                            <% } %>
                        </div>
                        <div class="side-container positive-side">
                            <% if (score > 0) { %>
                                <div class="bar-fill positive-bar" style="width: <%= percentage %>%;">+<%= score %></div>
                            <% } %>
                        </div>
                        <% if (score === 0) { %>
                            <span class="zero-label">0</span>
                        <% } %>
                    </div>
                </div>
            <% }) %>
        </div>

        <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 20px;">
            We found <strong><%= topMatches.length %></strong> unique career paths.
        </p>

        <% topMatches.forEach(group => { %>
            <div class="recommendation-group">
                <div class="group-header">
                    <div style="flex: 1;">
                        <h3 class="course-title"><%= group.courseName %></h3>
                        <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 4px;">
                            Holland Match: <strong><%= group.riasec %></strong>
                        </div>
                    </div>
                    <div style="background: var(--accent-blue); color: white; padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; font-weight: bold; height: fit-content; white-space: nowrap;">
                        Score: <%= group.score %>
                    </div>
                </div>

                <details class="provider-dropdown">
                    <summary>View Schools & Majors</summary>
                    <div class="provider-list">
                        <% group.providers.forEach(prov => { %>
                            <div class="provider-item">
                                <strong><%= prov.university %></strong>
                                <% if (prov.major && prov.major.trim() !== "") { %>
                                    <br><span style="color: var(--accent-blue);">Major in <%= prov.major %></span>
                                <% } %>
                                <% if (prov.campus && prov.campus.trim() !== "") { %>
                                    <br><small style="opacity: 0.7;">Campus: <%= prov.campus %></small>
                                <% } %>
                            </div>
                        <% }) %>
                    </div>
                </details>
            </div>
        <% }) %>

        <a href="/" class="btn">Retake Assessment</a>
    </div>
</div>

<script>
    if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
    if (localStorage.getItem('warm') === 'true') document.body.classList.add('warm-mode');
</script>
</body>
</html>